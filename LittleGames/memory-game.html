<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨˜æ†¶é…å°éŠæˆ²</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        header {
            text-align: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .control-panel {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
            justify-content: center;
        }
        .input-group {
            display: flex;
            flex-direction: column;
        }
        label {
            margin-bottom: 5px;
            font-weight: bold;
        }
        select {
            padding: 8px;
            width: 150px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: bold;
            margin-top: 23px;
        }
        button:hover {
            background-color: #45a049;
        }
        .game-board {
            display: grid;
            gap: 10px;
            margin: 20px auto;
            max-width: 600px;
        }
        .card {
            width: 100%;
            height: 120px;
            perspective: 1000px;
            cursor: pointer;
        }
        .card-inner {
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            position: relative;
        }
        .card-front, .card-back {
            width: 100%;
            height: 100%;
            position: absolute;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 40px;
        }
        .card-front {
            background-color: #3498db;
        }
        .card-back {
            background-color: #f1c40f;
            transform: rotateY(180deg);
        }
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card.matched .card-back {
            background-color: #2ecc71;
        }
        .stats {
            margin-top: 20px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }
        .description {
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-left: 4px solid #4CAF50;
            border-radius: 0 4px 4px 0;
        }
        footer {
            margin-top: 40px;
            border-top: 1px solid #eee;
            padding-top: 10px;
            text-align: center;
            font-size: 0.8em;
            color: #666;
        }
    </style>
</head>
<body>
    <header>
        <h1>è¨˜æ†¶é…å°éŠæˆ²</h1>
        <p>ç¿»é–‹å¡ç‰‡ï¼Œæ‰¾å‡ºæ‰€æœ‰æˆå°çš„ç¬¦è™Ÿ</p>
    </header>

    <main>
        <div class="description">
            <p><strong>è¨˜æ†¶é…å°éŠæˆ²èªªæ˜ï¼š</strong> é€™æ˜¯ä¸€å€‹æ¸¬è©¦è¨˜æ†¶åŠ›çš„éŠæˆ²ã€‚æ‰€æœ‰å¡ç‰‡é–‹å§‹æ™‚éƒ½é¢æœä¸‹ã€‚æ¯æ¬¡å¯ä»¥ç¿»é–‹å…©å¼µå¡ç‰‡ï¼Œå¦‚æœå®ƒå€‘åŒ¹é…ï¼Œå‰‡ä¿æŒç¿»é–‹ï¼›å¦‚æœä¸åŒ¹é…ï¼Œå‰‡å†æ¬¡ç¿»å›ã€‚ç›®æ¨™æ˜¯ä»¥æœ€å°‘çš„å˜—è©¦æ¬¡æ•¸æ‰¾å‡ºæ‰€æœ‰åŒ¹é…çš„å¡ç‰‡å°ã€‚</p>
            <p><a href="memory-explanation.html">æŸ¥çœ‹åŠŸèƒ½è©³è§£ &raquo;</a></p>
        </div>

        <div class="control-panel">
            <div class="input-group">
                <label for="difficulty">é›£åº¦é¸æ“‡ï¼š</label>
                <select id="difficulty">
                    <option value="easy">ç°¡å–® (4x3)</option>
                    <option value="medium">ä¸­ç­‰ (4x4)</option>
                    <option value="hard">å›°é›£ (6x4)</option>
                </select>
            </div>
            <button id="start-btn">é–‹å§‹éŠæˆ²</button>
            <button id="reset-btn">é‡ç½®</button>
        </div>

        <div id="game-board" class="game-board"></div>

        <div id="stats" class="stats">
            å˜—è©¦æ¬¡æ•¸: 0 | é…å°æˆåŠŸ: 0 | å‰©é¤˜å°æ•¸: 0
        </div>
    </main>

    <footer>
        <p>&copy; 2025 å°éŠæˆ²é›†åˆ | <a href="index.html">è¿”å›éŠæˆ²åˆ—è¡¨</a></p>
    </footer>

    <script>
        // ä¸»è¦è®Šæ•¸
        let cards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let attempts = 0;
        let totalPairs = 0;
        let isProcessing = false;
        
        // å¡ç‰‡ç¬¦è™Ÿ
        const symbols = ['ğŸ±', 'ğŸ¶', 'ğŸ°', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼', 'ğŸ¨', 'ğŸ¦', 'ğŸ¯', 'ğŸ­', 'ğŸ¹', 'ğŸµ'];
        
        // DOMå…ƒç´ 
        const gameBoard = document.getElementById('game-board');
        const difficultySelect = document.getElementById('difficulty');
        const startBtn = document.getElementById('start-btn');
        const resetBtn = document.getElementById('reset-btn');
        const statsDisplay = document.getElementById('stats');
        
        // åˆå§‹åŒ–
        function init() {
            cards = [];
            flippedCards = [];
            matchedPairs = 0;
            attempts = 0;
            isProcessing = false;
            
            // æ›´æ–°çµ±è¨ˆä¿¡æ¯
            updateStats();
        }
        
        // å‰µå»ºéŠæˆ²æ¿
        function createGameBoard() {
            // æ¸…ç©ºéŠæˆ²æ¿
            gameBoard.innerHTML = '';
            
            // ç²å–é›£åº¦è¨­ç½®
            const difficulty = difficultySelect.value;
            let rows, cols;
            
            switch(difficulty) {
                case 'easy':
                    rows = 3;
                    cols = 4;
                    break;
                case 'medium':
                    rows = 4;
                    cols = 4;
                    break;
                case 'hard':
                    rows = 4;
                    cols = 6;
                    break;
                default:
                    rows = 3;
                    cols = 4;
            }
            
            // è¨­ç½®ç¸½å°æ•¸
            totalPairs = (rows * cols) / 2;
            
            // è¨­ç½®ç¶²æ ¼æ¨£å¼
            gameBoard.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
            gameBoard.style.gridTemplateRows = `repeat(${rows}, 1fr)`;
            
            // æº–å‚™å¡ç‰‡ç¬¦è™Ÿ
            let cardSymbols = [];
            for (let i = 0; i < totalPairs; i++) {
                cardSymbols.push(symbols[i]);
                cardSymbols.push(symbols[i]);
            }
            
            // æ´—ç‰Œ
            cardSymbols = shuffleArray(cardSymbols);
            
            // å‰µå»ºå¡ç‰‡
            for (let i = 0; i < rows * cols; i++) {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.index = i;
                card.dataset.symbol = cardSymbols[i];
                
                const cardInner = document.createElement('div');
                cardInner.className = 'card-inner';
                
                const cardFront = document.createElement('div');
                cardFront.className = 'card-front';
                cardFront.textContent = '?';
                
                const cardBack = document.createElement('div');
                cardBack.className = 'card-back';
                cardBack.textContent = cardSymbols[i];
                
                cardInner.appendChild(cardFront);
                cardInner.appendChild(cardBack);
                card.appendChild(cardInner);
                
                card.addEventListener('click', flipCard);
                gameBoard.appendChild(card);
                cards.push(card);
            }
            
            // åˆå§‹åŒ–çµ±è¨ˆ
            init();
        }
        
        // ç¿»ç‰Œ
        function flipCard() {
            // å¦‚æœæ­£åœ¨è™•ç†ä¸­æˆ–å¡ç‰‡å·²ç¿»é–‹æˆ–å·²é…å°ï¼Œå‰‡è¿”å›
            if (isProcessing || this.classList.contains('flipped') || this.classList.contains('matched')) {
                return;
            }
            
            // å¦‚æœå·²ç¶“ç¿»é–‹å…©å¼µå¡ç‰‡ï¼Œå‰‡è¿”å›
            if (flippedCards.length >= 2) {
                return;
            }
            
            // ç¿»é–‹å¡ç‰‡
            this.classList.add('flipped');
            flippedCards.push(this);
            
            // å¦‚æœç¿»é–‹äº†å…©å¼µå¡ç‰‡ï¼Œå‰‡æª¢æŸ¥æ˜¯å¦åŒ¹é…
            if (flippedCards.length === 2) {
                attempts++;
                updateStats();
                
                if (flippedCards[0].dataset.symbol === flippedCards[1].dataset.symbol) {
                    // åŒ¹é…
                    matchedPairs++;
                    flippedCards[0].classList.add('matched');
                    flippedCards[1].classList.add('matched');
                    flippedCards = [];
                    
                    // æ›´æ–°çµ±è¨ˆ
                    updateStats();
                    
                    // æª¢æŸ¥æ˜¯å¦å®Œæˆ
                    if (matchedPairs === totalPairs) {
                        setTimeout(() => {
                            alert(`æ­å–œï¼ä½ å®Œæˆäº†éŠæˆ²ï¼\nå˜—è©¦æ¬¡æ•¸: ${attempts}`);
                        }, 500);
                    }
                } else {
                    // ä¸åŒ¹é…ï¼Œç¿»å›
                    isProcessing = true;
                    setTimeout(() => {
                        flippedCards[0].classList.remove('flipped');
                        flippedCards[1].classList.remove('flipped');
                        flippedCards = [];
                        isProcessing = false;
                    }, 1000);
                }
            }
        }
        
        // æ´—ç‰Œå‡½æ•¸ (Fisher-Yates ç®—æ³•)
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        // æ›´æ–°çµ±è¨ˆä¿¡æ¯
        function updateStats() {
            statsDisplay.textContent = `å˜—è©¦æ¬¡æ•¸: ${attempts} | é…å°æˆåŠŸ: ${matchedPairs} | å‰©é¤˜å°æ•¸: ${totalPairs - matchedPairs}`;
        }
        
        // äº‹ä»¶ç›£è½å™¨
        startBtn.addEventListener('click', createGameBoard);
        resetBtn.addEventListener('click', createGameBoard);
        
        // åˆå§‹åŠ è¼‰
        window.onload = function() {
            createGameBoard();
        };
    </script>
</body>
</html> 